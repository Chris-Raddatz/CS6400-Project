This is a web application combining a Node.js server, an Express.js router, and a PostgreSQL database.

## Prerequisites

Before diving into the project, ensure you have Node.js and npm installed. Node's [official download page](https://nodejs.org/en/download) provides the necessary packages, with npm included in the installation.

PostgreSQL is also essential. The latest distributions are available at the [PostgreSQL download page](https://www.postgresql.org/download/).

Here are the docs for each tool:
[Embedded JavaScript templating (EJS view engine)](https://ejs.co/#docs)
[ExpressJS route handler](https://expressjs.com/)
[Passport auth middleware](https://www.passportjs.org/docs/)
[pg](https://node-postgres.com/) (for managing the database connection pool)

## Getting Started

Clone the repository to your local machine. From the project's root directory, install all required npm packages using:

`npm install`

Start the Express development server with (should work after setting up & initializing database):

`npm start`

## Setting Up Local Databases

Enter PostgreSQL's CLI with `psql` and set up your local databases using the following SQL commands:

```sql
CREATE USER myuser SUPERUSER PASSWORD 'mypassword';
CREATE DATABASE mydatabase WITH OWNER myuser;
CREATE DATABASE mytestdatabase WITH OWNER myuser;
```

Customize `myuser`, `mypassword`, `mydatabase`, and `mytestdatabase` as needed.

Configure the `.env` file in the project's root by duplicating `example.env` and setting your database connection strings.

## Initializing the Database

Populate your database with initial data by executing the build script:

`npm run devbuild`

This script runs the `init.sql` file against your PostgreSQL setup.

## Project Overview

Our project is designed with clear separation of concerns in mind:

- node_modules/: Stores the project's npm dependencies. Autogenerated after running `npm install`
- `src/`: The main application code.
  - app.js: Initializes the Express app with routes and middleware for auth, error handling, etc.
  - `models/`: Contains data access logic, encapsulating all interactions with the database.
  - `database/`: Manages the database connection and initialization scripts.
  - `routes/`: Handles routing, directing requests to appropriate handlers. Handles data returned by model and renders views.
  - `views/`: Contains EJS templates for dynamic HTML rendering.
  - `public/`: Hosts static files, including stylesheets for the front-end.
  - `tests/`: Includes test scripts to ensure application stability.
- .gitignore: Specifies files to be ignored by Git.
- example.env: A template for setting up environment variables.
- package-lock.json: Locks the versions of npm dependencies for consistent builds.
- package.json: Describes the project and its dependencies, providing npm scripts for common tasks.

## Key Dependencies

The project makes use of several important npm packages:

- Express: The web server framework used to handle HTTP requests and route them to appropriate handlers.
- Passport: Manages user authentication, working with the `passport-local` strategy for credential verification.
- Express-Session: Maintains user session states across HTTP requests.
- EJS: A template engine for generating HTML with embedded JavaScript.
- pg: The PostgreSQL client, enabling database interactions from the Node.js application.

## Scripts

- `npm start`: Launches the Express development server.
- `npm test`: Runs the test suite for the application.
- `npm run devbuild`: Runs the init.sql script through the development environment.

Look over the application's routes, models, and views to start shaping the application into BuzzBid. Each entity from our ERR is represented as a route and model. The models connect our tasks to the database and handles the primary business logic. Models are responsible for throwing errors, not handling them. Routes are a pipeline between data that models produce and information that views need. The "C" in MVC. Routes work directly with the http request and response objects. Routes catch and handle errors.

Important notes:

- I've already configured authentication, signing in, and logging out of sessions. All routes, except for "/login" and "/register", are password protected.
- The username is always available in the req object as req.user in routes/.
- I think it makes the most sense to have all files based on EER entities. Within each file, the IFD tasks will be implemented as a route in its respective route handler entity and a database function for the model entity.
- The ./src/routes/index.js file contains commented code purposely as a placeholder for the files expected to be implemented.

This implementation structure would cover all tasks:

- `routes/`

  - `user.js starting at "/"` (Matthew has all of the user routes)

    - GET /login
    - POST /login (Login task)
    - GET /register
    - POST /register (Register task)
    - GET /menu (View Menu task)

  - `item.js starting at "/item"`

    - GET /list-item (List Item task load) `e.g, "/item/list-item"` (low-medium) (Thair) Done
    - POST /list-item (List Item task) (medium) (Thair) Done

    - GET /search (easy) (Chris) **Done**
    - GET /search/result?keyword=test&category=etc.. (Query for Items task) (medium) (Chris) **Done** (For errors it just reloads the search page)

    - GET /view?itemID=test (View Item task) (hard) (Matthew)
    - GET /result?itemID=test (View Item Results task) (way hard) (Matthew)

    - POST /description (Edit Item Description task) (easy) (Thair) Done

  - `admin.js starting at "/report"`

    - GET /categories (View Category Report) (Chris) **Done**
    - GET /users (View Users Report) (Chris) **Done** Could put in code to not show users that have N/A for everything
    - GET /top-items (Top Rated Items Report) (Chris) **Done**
    - GET /auction-stats (Auction Statistics Report) (Chris) **Done**
    - GET /cancelled-auctions (Cancelled Auction Details report) (Chris) **Done**

  - `bid.js starting at "/bid"`

    - POST /place (Place Bid task) (high-medium) (Race) Unsure how to pass on item id and user to post call

  - `auction.js starting at "/auction"`

    - POST /cancel (Cancel Item task) (easy) (Matthew)
    - GET /results (View Auction Results task) (medium) (Kevin)

  - `rating.js starting at "/rating"`
    - GET /?itemID=test (View Rating Task) (medium) (Kevin)
    - POST / (Add Rating task) (low-medium) (Kevin)
    - POST / (Delete Rating task) (low-medium) (Kevin)

Routes might be the trickiest thing for you guys to figure out, so I took the time to be very verbose in my code and comments. At the time of writing this, login, logout, register, and view menu are fully functional. I did this so no one else had to worry about configuring security, error handling, project structuring, etc. boring coding stuff not particularly relevant to this class.

Happy coding!
